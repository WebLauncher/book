<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Deleting Data" lang="en" name="title" />
<meta content="doc models,custom logic,callback methods,model class,database model,callbacks,information model,request data,deleteall,fragment,leverage,array,WebLauncher Framework,failure,recipes,benefit,delete,data model" lang="en" name="keywords" />

    <title>Deleting Data &mdash; WebLauncher Framework 2.7.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.7.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="WebLauncher Framework 2.7.0 documentation" href="../index.html" />
    <link rel="up" title="Models" href="../models.html" />
    <link rel="next" title="Data Validation" href="data-validation.html" />
    <link rel="prev" title="Saving Your Data" href="saving-your-data.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><img src="../_static/logo.png">
          WebLauncher Framework</a>
        <span class="navbar-text navbar-version pull-left"><b>2.7</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../update.html">Update from 2.6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configurations.html">Configurations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../controllers.html">Controllers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../models.html">Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../views.html">Views</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Deleting Data</a><ul>
<li><a class="reference internal" href="#delete">delete</a></li>
<li><a class="reference internal" href="#deleteall">deleteAll</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="saving-your-data.html" title="Previous Chapter: Saving Your Data"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Saving Your Data</span>
    </a>
  </li>
  <li>
    <a href="data-validation.html" title="Next Chapter: Data Validation"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Data Validation &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="https://github.com/weblauncher/book/edit/master/models/deleting-data.rst"
     rel="nofollow">Modify Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="deleting-data">
<h1>Deleting Data<a class="headerlink" href="#deleting-data" title="Permalink to this headline">¶</a></h1>
<p>WebLauncher Framework&#8217;s Model class offers a few ways to delete records from your database.</p>
<div class="section" id="delete">
<span id="model-delete"></span><h2>delete<a class="headerlink" href="#delete" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">delete(integer</span> <span class="pre">$id</span> <span class="pre">=</span> <span class="pre">null,</span> <span class="pre">boolean</span> <span class="pre">$cascade</span> <span class="pre">=</span> <span class="pre">true);</span></tt></p>
<p>Deletes the record identified by $id. By default, also deletes
records dependent on the record specified to be deleted.</p>
<p>For example, when deleting a User record that is tied to many
Recipe records (User &#8216;hasMany&#8217; or &#8216;hasAndBelongsToMany&#8217; Recipes):</p>
<ul class="simple">
<li>if $cascade is set to true, the related Recipe records are also
deleted if the model&#8217;s dependent-value is set to true.</li>
<li>if $cascade is set to false, the Recipe records will remain
after the User has been deleted.</li>
</ul>
<p>If your database supports foreign keys and cascading deletes, it&#8217;s often more
efficient to rely on that feature than WebLauncher Framework&#8217;s cascading. The one benefit to
using the cascade feature of <tt class="docutils literal"><span class="pre">Model::delete()</span></tt> is that it allows you to
leverage behaviors and model callbacks:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">$this-&gt;Comment-&gt;delete($this-&gt;request-&gt;data(&#39;Comment.id&#39;));</span>
</pre></div>
</div>
<p>You can hook custom logic into the delete process using the <tt class="docutils literal"><span class="pre">beforeDelete</span></tt> and
<tt class="docutils literal"><span class="pre">afterDelete</span></tt> callbacks present in both Models and Behaviors. See
<a class="reference internal" href="callback-methods.html"><em>Callback Methods</em></a> for more information.</p>
</div>
<div class="section" id="deleteall">
<span id="model-deleteall"></span><h2>deleteAll<a class="headerlink" href="#deleteall" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">deleteAll(mixed</span> <span class="pre">$conditions,</span> <span class="pre">$cascade</span> <span class="pre">=</span> <span class="pre">true,</span> <span class="pre">$callbacks</span> <span class="pre">=</span> <span class="pre">false)</span></tt></p>
<p><tt class="docutils literal"><span class="pre">deleteAll()</span></tt> is similar to <tt class="docutils literal"><span class="pre">delete()</span></tt>, except that
<tt class="docutils literal"><span class="pre">deleteAll()</span></tt> will delete all records that match the supplied
conditions. The <tt class="docutils literal"><span class="pre">$conditions</span></tt> array should be supplied as a SQL
fragment or array.</p>
<ul class="simple">
<li><strong>conditions</strong> Conditions to match</li>
<li><strong>cascade</strong> Boolean, Set to true to delete records that depend on
this record</li>
<li><strong>callbacks</strong> Boolean, Run callbacks</li>
</ul>
<p>Return boolean True on success, false on failure.</p>
<p>Example:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="x">// Delete with array conditions similar to find()</span>
<span class="x">$this-&gt;Comment-&gt;deleteAll(array(&#39;Comment.spam&#39; =&gt; true), false);</span>
</pre></div>
</div>
<p>If you delete with either callbacks and/or cascade, rows will be found and then
deleted. This will often result in more queries being issued. Associations will
be reset before the matched records are deleted in deleteAll(). If you use
bindModel() or unbindModel() to change the associations, you should set
<strong>reset</strong> to <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">deleteAll() will return true even if no records are deleted, as the conditions
for the delete query were successful and no matching records remain.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, WebLauncher.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>